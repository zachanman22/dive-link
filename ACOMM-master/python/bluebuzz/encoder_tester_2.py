import chardet
from base64 import encode
from bluebuzz_ecc import BlueBuzz_ECC
import json
import numpy as np
from reedsolo import RSCodec, ReedSolomonError
from bitstring import BitArray

bbc_ecc = BlueBuzz_ECC(0, 10)

"011010000110010101101100011011000110111101001000011011110111011101100100011110010011010000001101000010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000001100101000010011110101011111101001101011001101110101110001110110110100"
exampleMessage = {"m": 0, "d": ["00110100001100001011010000010110001101111010000000010111101110011011001000011100000110000000000010000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001001010000000111101010111111010011010110001011101011100011101101101000000000100010111", "00110100001100001011011000010110001101111010010000010111101110111011001000011100000110000000011010000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000011001010000000111101010111111010011010110011011101011100011101101101000000000100010111",
                                "00110100001100001011011000110110001101111010010000010111101010111011001000011100000110000000011010000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000011001010000000111101010111111010011010110011011101011100011101101101000000000101010111", "00110100001100001011011000110010001101111010010000110011101010111011001000011100000010000000011010000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000011001010000000011101010111111010011010010011011101011100011101101101000000000111010111", "00110100001100001010011000110010001100111010000000110011101010111011001000111100000010000000011010000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011000000000000011101010111010010011010010001011101011100011101101101000000000111"]}

encodedExampleMessageJson = json.dumps(exampleMessage).encode()
exampleMessageJson = json.loads(encodedExampleMessageJson.decode('UTF-8'))
print(bbc_ecc.decodeJson(exampleMessageJson))
